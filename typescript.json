{
	"API get": {
		"prefix": [
			"!apiget",
			"!api get"
		],
		"body": [
			"interface Header {",
			"\tkey: string;",
			"\tvalue: string;",
			"}",
			"",
			"/**",
			" * Sends a GET request to the specified URL using XMLHttpRequest",
			" * @param url - The endpoint URL",
			" * @param headers - Array of headers to include in the request",
			" * @param responseType - Expected response type ('json' | 'text' | 'blob' | 'arraybuffer' | ...)",
			" * @returns Promise with the response data",
			" */",
			"function apiGET<T = unknown>(",
			"\turl: string,",
			"\theaders: Header[] = [],",
			"\tresponseType: XMLHttpRequestResponseType = \"json\"",
			"): Promise<T> {",
			"\treturn new Promise((resolve, reject) => {",
			"\t\tconst xhr = new XMLHttpRequest();",
			"",
			"\t\txhr.open(\"GET\", url, true);",
			"",
			"\t\t// Set all provided headers",
			"\t\theaders.forEach(({ key, value }) => {",
			"\t\t\txhr.setRequestHeader(key, value);",
			"\t\t});",
			"",
			"\t\txhr.responseType = responseType;",
			"",
			"\t\txhr.onload = () => {",
			"\t\t\t// onload is called when readyState === 4",
			"\t\t\tif (xhr.status >= 200 && xhr.status < 300) {",
			"\t\t\t\tresolve(xhr.response as T);",
			"\t\t\t} else {",
			"\t\t\t\treject(new Error(`Request failed with status ${xhr.status} - ${xhr.statusText}`));",
			"\t\t\t}",
			"\t\t};",
			"",
			"\t\txhr.onerror = () => {",
			"\t\t\treject(new Error(\"Network error\"));",
			"\t\t};",
			"",
			"\t\txhr.ontimeout = () => {",
			"\t\t\treject(new Error(\"Request timeout\"));",
			"\t\t};",
			"",
			"\t\t// Optional: better logging (you can remove or customize)",
			"\t\txhr.onreadystatechange = () => {",
			"\t\t\tif (xhr.readyState === 4) {",
			"\t\t\t\tconsole.log(`Request to \\${url} completed with status: ${xhr.status}`);",
			"\t\t\t}",
			"\t\t};",
			"",
			"\t\txhr.timeout = 8000; // 8 seconds",
			"",
			"\t\txhr.send();",
			"\t});",
			"}"
		],
		"description": "make an API get request"
	},
	"Bun HTTP Server": {
		"prefix": "!http bun server",
		"body": [
			"// https://bun.com/docs/runtime/http/server",
			"const server = Bun.serve({",
			"",
			"\t//* on which hostname and port server should listen",
			"\tport: 8080, // defaults to \\$BUN_PORT, \\$PORT, \\$NODE_PORT otherwise 3000, 0 will\tbe random port",
			"\thostname: \"0.0.0.0\", // defaults to \"0.0.0.0\" can be hostname",
			"",
			"\t// 10 seconds:",
			"\t// idleTimeout: 10,",
			"",
			"\t//* `routes` requires Bun v1.2.3+",
			"\troutes: {",
			"\t\t// Static routes",
			"\t\t\"/api/status\": new Response(\"OK\"),",
			"",
			"\t\t// Dynamic routes",
			"\t\t\"/users/:id\": (req) => {",
			"\t\t\treturn new Response(`Hello User ${req.params.id}!`);",
			"\t\t},",
			"",
			"\t\t// Per-HTTP method handlers",
			"\t\t\"/api/posts\": {",
			"\t\t\tGET: () => new Response(\"List posts\"),",
			"\t\t\tPOST: async (req) => {",
			"\t\t\t\tconst body = await req.json();",
			"\t\t\t\treturn Response.json({ created: true, ...body });",
			"\t\t\t},",
			"\t\t},",
			"",
			"",
			"\t\t// Wildcard route for all routes that start with \"/api/\" and aren't otherwise matched",
			"\t\t\"/api/*\": Response.json({ message: \"Not found\" }, { status: 404 }),",
			"",
			"\t\t// Redirect from /blog/hello to /blog/hello/world",
			"\t\t\"/blog/hello\": Response.redirect(\"/blog/hello/world\"),",
			"",
			"\t\t// Serve a file by lazily loading it into memory",
			"\t\t\"/favicon.ico\": Bun.file(\"./favicon.ico\"),",
			"",
			"\t\t//* Access cookies from the request",
			"\t\t\"/profile\": req => {",
			"\t\t\t// Access cookies from the request",
			"\t\t\tconst userId = req.cookies.get(\"user_id\");",
			"\t\t\tconst theme = req.cookies.get(\"theme\") || \"light\";",
			"",
			"\t\t\treturn Response.json({",
			"\t\t\t\tuserId,",
			"\t\t\t\ttheme,",
			"\t\t\t\tmessage: \"Profile page\",",
			"\t\t\t});",
			"\t\t},",
			"",
			"\t\t//* Set cookies in the response",
			"\t\t\"/login\": req => {",
			"\t\t\tconst cookies = req.cookies;",
			"",
			"\t\t\t// Set a cookie with various options",
			"\t\t\tcookies.set(\"user_id\", \"12345\", {",
			"\t\t\t\tmaxAge: 60 * 60 * 24 * 7, // 1 week",
			"\t\t\t\thttpOnly: true,",
			"\t\t\t\tsecure: true,",
			"\t\t\t\tpath: \"/\",",
			"\t\t\t});",
			"",
			"\t\t\t// Add a theme preference cookie",
			"\t\t\tcookies.set(\"theme\", \"dark\");",
			"",
			"\t\t\t// Modified cookies from the request are automatically applied to the response",
			"\t\t\treturn new Response(\"Login successful\");",
			"\t\t},",
			"",
			"\t\t//* Deleting cookies",
			"\t\t\"/logout\": req => {",
			"\t\t\t// Delete the user_id cookie",
			"\t\t\treq.cookies.delete(\"user_id\", {",
			"\t\t\t\tpath: \"/\",",
			"\t\t\t});",
			"",
			"\t\t\treturn new Response(\"Logged out successfully\");",
			"\t\t},",
			"",
			"\t},",
			"",
			"\tasync fetch(req, server) {",
			"",
			"\t\t//* Get server metrics",
			"\t\tconst serverPendingRequests = server.pendingRequests;",
			"\t\tconst serverPendingWebSockets = server.pendingWebSockets;",
			"\t\tconst chatUsers = server.subscriberCount(\"chat\"); // number of subscribers to \"chat\" channel",
			"",
			"\t\t//* Fetch client IP and port",
			"\t\tconst address = server.requestIP(req);",
			"\t\tconst clientIP = address?.address;",
			"\t\tconst clientPort = address?.port;",
			"",
			"\t\t//* Set 60 second timeout for this request",
			"\t\tserver.timeout(req, 60);",
			"\t\t// If they take longer than 60 seconds to send the body, the request will be aborted",
			"\t\tawait req.text();",
			"",
			"\t\treturn new Response(\"Done!\");",
			"\t},",
			"",
			"\t//* TLS",
			"\ttls: [",
			"\t\t{",
			"\t\t\tkey: Bun.file(\"./key1.pem\"),",
			"\t\t\tcert: Bun.file(\"./cert1.pem\"),",
			"\t\t\tserverName: \"my-server1.com\",",
			"\t\t},",
			"\t\t{",
			"\t\t\tkey: Bun.file(\"./key2.pem\"),",
			"\t\t\tcert: Bun.file(\"./cert2.pem\"),",
			"\t\t\tserverName: \"my-server2.com\",",
			"\t\t},",
			"\t],",
			"",
			"});"
		],
		"description": "Create a bun HTTP server to host and serve HTML , typescript, javascript files"
	},
}